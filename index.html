<!DOCTYPE html>
<html lang="tok">

<head>
  <meta charset="UTF-8">
  <title>lipu suli</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <h2>pali pi lipu</h2>
  <nav>
    <a href="?source=BBC">BBC</a> |
    <a href="?source=Reuters">Reuters</a> |
    <a href="?source=CNN">CNN</a> |
    <a href="?source=The%20Guardian">The Guardian</a> |
    <a href="index.html">All</a>
  </nav>

  <div id="articles"></div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const sourceFilter = params.get("source");

    fetch("articles-index.json")
      .then(r => r.json())
      .then(data => {
        const container = document.getElementById("articles");
        data
          .filter(a => !sourceFilter || a.publisher === sourceFilter)
          .forEach(a => {
            const date = new Date(a.date).toLocaleDateString();
            const el = document.createElement("div");
            el.innerHTML = `
          <a href="${a.file}">${a.title}</a><br>
          <small>${a.publisher} â€¢ ${date}</small>
          <p>${a.summary}</p><hr>`;
            container.appendChild(el);
          });
      });
  </script>

</body>

</html>
